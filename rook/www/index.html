<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>StatMine</title>

    <!-- webpage icon -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="icon" href="images/favicon2.png" type="image/png" />

    <!-- jQuery includes -->
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>

    <!-- bootstrap includes -->
    <link type="text/css" href="js/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <script type="text/javascript" src="js/bootstrap/js/bootstrap.min.js"></script>

    <!-- styling -->
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:300,300italic,400' rel='stylesheet' type='text/css'/>
    <link type="text/css" href="css/statmine.css" rel="stylesheet" />
    <link type="text/css" href="css/index.css" rel="stylesheet" />

    <!-- scripting -->
    <script type="text/javascript">
      $(function() {

        // Load list of tables and add the tables to the page
        jQuery.getJSON("r/list_tables.r", function(data) {

          // Create a new row in the table #tables for each table
          jQuery.each(data, function(i, d) {
            var newt = $("<tbody>");
            $("<tr>").appendTo(newt).html(
              "<td class=\"select\"><input type=\"checkbox\" name=\"foo\" value=\"" + i + "\"></input></td>" + 
              "<td class=\"description\"><h3>" + d.name + 
              ' <a href="table.html?table=' + i + '"><i class="icon-th"></i></a> ' + 
              ' <a href="visualise.html?table=' + i + '"><i class="icon-eye-open"></i></a>' + 
              '</h3>' + "<p>" + d.description + "</p></td>"
            );
            $("#tables").append(newt);
          })

          // Only show the link to page where tables can be linked when 2 tables 
          // are selected; otherwise hide
          $("#link_tables").hide();
          $("input").change(function() {
            var nselected = $("input:checked").length;
            if (nselected == 2) {
              $("#link_tables").show();
            } else {
              $("#link_tables").hide();
            }
          });
        });

        // Handle clicks on the link link
        $("#link_tables").click(function() {
          var tables = {
            "table1": $($("input:checked")[0]).val(),
            "table2": $($("input:checked")[1]).val()
          };
          window.open("link.html?table1=" + tables.table1 + "&table2=" + tables.table2, "_self", false);
        })
      });
    </script>

  </head>
  <body>
   
  <header>
    <h1><a href="index.html">StatMine</a></h1>
    <nav>
      <ul>
        <li><a href="index.html">Tables</a></li>
      </ul>
    </nav>
  </header>

  <article>
    <h2>Available tables</h2>
    <table id="tables">
    </table>
    <p><a href="#" id="link_tables">Link tables</a></p>
  </article>

  <footer>
  </footer>

  </body>
</html>


