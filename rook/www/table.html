<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>StatMine</title>

    <!-- webpage icon -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="icon" href="images/favicon2.png" type="image/png" />

    <!-- jQuery includes -->
    <script type="text/javascript" src="js/jquery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery.getUrlParam.js"></script>
    <script type="text/javascript" src="js/DataTables/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="js/mustache/mustache.js"></script>
    <script type="text/javascript" src="js/R.js"></script>


    <!-- localization includes -->
    <script type="text/javascript" src="js/i18next.js"></script>

    <!-- bootstrap includes -->
    <link type="text/css" href="js/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <script type="text/javascript" src="js/bootstrap/js/bootstrap.min.js"></script>

    <!-- styling -->
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:300,300italic,400' rel='stylesheet' type='text/css'/>
    <link type="text/css" href="css/statmine.css" rel="stylesheet" />
    <link type="text/css" href="css/table.css" rel="stylesheet" />

    <!-- scripting -->
    <script type="text/javascript">
     $(function() {

        var tablename = $(document).getUrlParam("table");
        R.get_data(tablename).success(function(data){
          var div   = $("#table");
          console.log(data)
          var table = $("<table>");
          table.appendTo(div);

          var colnames = data[1].map(function(n){return {sTitle: n}});
          console.log(colnames)
          table.dataTable({
            aaData: data, 
            aoColumns: colnames,
            bScrollInfinite: true,
            sScrollY: "400px",
            bScrollCollapse: true,
            bPaginate: false,
            bDeferRender : true 
          });
        });


        $("a.mode").each(function(_, a){
          a.href += window.location.search;
        })

        i18n.init({}, function(){
          $("body").i18n();
        });


      });
    </script>

  </head>

  <body>
    <header>
      <div class="navbar navbar-static-top navbar-inverse">
      <div class="navbar-inner">
        <a class="brand" href="index.html">StatMine</a>
        <ul class="nav">
          <li><a class="mode" href="visualize.html"><i class="icon-eye-open icon-white"></i> <span data-i18n="view">View</span></a></li>
          <li class="active"><a class="mode" href="table.html"><i class="icon-list-th icon-white"></i> <span data-i18n="table">Table</span></a></li>
          <li><a class="mode" href="link.html"><i class="icon-resize-horizontal icon-white"></i> <span data-i18n="link">Link</span></a></li>
          <li><a class="mode" href="info.html"><i class="icon-info-sign icon-white"></i> <span data-i18n="info">Info</span></a></li>
        </ul>
        <span class="brand" id="title"/>
      </div>
    </div>
    </header>
    <div class="container-fluid" style="padding-left:0">
      <div class="row-fluid">
        <div class="span8 offset2">
          <div id="table"></div> 
        </div>
      </div>
    </div>
    <footer>
    </footer>
  </body>
</html>

